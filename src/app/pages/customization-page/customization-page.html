<div class="customization-container">
  <!-- Background patterns -->
  <div class="h2-bg-overlay">
    <div class="technical-text top">04:40 &nbsp;&nbsp; 04:42 &nbsp;&nbsp; 04:44 &nbsp;&nbsp; 04:46 &nbsp;&nbsp; 04:48 &nbsp;&nbsp; 04:50 &nbsp;&nbsp; 04:52 &nbsp;&nbsp; 04:54</div>
    <div class="scanlines"></div>
  </div>

  <div class="ui-layout">
    <!-- Selection List -->
    <div class="selection-box">
      <div class="list-item locked">
        <span class="label">Player Model</span>
        <span class="value">Spartan</span>
      </div>

      <div class="list-item">
        <span class="label">Primary Player Color</span>
        <div class="value-container">
          <span class="value">{{primaryName()}}</span>
          <div class="color-preview" [style.background]="primaryHex()"></div>
        </div>
      </div>

      <!-- Color Grid for Primary -->
      <div class="color-picker-subpanel">
        <div class="color-grid">
          @for (c of colors; track $index) {
            <button
              class="color-swatch-btn"
              [style.background]="c.hex"
              [class.selected]="primaryHex() === c.hex.toLowerCase()"
              (click)="setPrimaryHex(c.hex)"
              [title]="c.name"
            >
              <div class="selection-marker"></div>
            </button>
          }
        </div>
      </div>

      <div class="list-item">
        <span class="label">Secondary Player Color</span>
        <div class="value-container">
          <span class="value">{{secondaryName()}}</span>
          <div class="color-preview" [style.background]="secondaryHex()"></div>
        </div>
      </div>

      <!-- Color Grid for Secondary -->
      <div class="color-picker-subpanel">
        <div class="color-grid">
          @for (c of colors; track $index) {
            <button
              class="color-swatch-btn"
              [style.background]="c.hex"
              [class.selected]="secondaryHex() === c.hex.toLowerCase()"
              (click)="setSecondaryHex(c.hex)"
              [title]="c.name"
            >
              <div class="selection-marker"></div>
            </button>
          }
        </div>
      </div>
    </div>

    <!-- Footer prompts -->
    <div class="h2-footer">
      <div class="footer-line"></div>
      <div class="prompt-container">
        <div class="prompt">
          <span class="btn-icon a">A</span> SELECT
        </div>
        <div class="prompt">
          <span class="btn-icon b">B</span> DONE
        </div>
      </div>
    </div>
  </div>

  <!-- Spartan Model Layout -->
  <div class="model-viewport">

    @if (loader().active) {  
      <div class="loading-overlay">
        <app-halo-spinner size="64px"/>
        <div class="loading-text">{{ loader.progress() | number: '1.0-0' }}%</div>
      </div>
    }

    <div class="camera-debug-hud">
      <div class="hud-label">DEBUG_CAMERA_COORDS</div>
      <div class="hud-values">
        <span>X: {{cameraPos().x.toFixed(2)}}</span>
        <span>Y: {{cameraPos().y.toFixed(2)}}</span>
        <span>Z: {{cameraPos().z.toFixed(2)}}</span>
      </div>
      <div class="hud-hint">USE MOUSE TO LOOK AROUND</div>
    </div>

    <ngt-canvas [camera]="{ position: [106.62, 4.04, -33.41], fov: 40 }" shadows>
      <app-scene-component
        *canvasContent
        [primaryColor]="primaryColor()"
        [secondaryColor]="secondaryColor()"
        (cameraChange)="onCameraChange($event)"
      />
    </ngt-canvas>
    
    <!-- HUD bracket around spartan foot area as seen in image -->
    <div class="hud-bracket"></div>
  </div>
</div>
